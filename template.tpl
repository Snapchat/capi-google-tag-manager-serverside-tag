___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Snap ConversionsAPI Tag",
  "categories": [
    "CONVERSION",
    "ADVERTISING",
    "ANALYTICS"
  ],
  "brand": {
    "id": "github.com_Snapchat",
    "displayName": "Snapchat",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAA8iAAAPIgH6p8NtAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAwBQTFRF////BQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFKRlgkgAAAP90Uk5TAAECAwQF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\u003d"
  },
  "description": "The server-side tag template to send event from your tagging server to Snap Conversions API.",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "pixelId",
    "displayName": "Pixel ID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "apiAccessToken",
    "displayName": "API Access Token",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "To use the Conversions API, you need to use the access token for auth. See \u003ca href\u003d\"https://docs.snap.com/api/marketing-api/Conversions-API/GetStarted#access-token\"\u003ehere\u003c/a\u003e to generate the token."
  },
  {
    "type": "SELECT",
    "name": "inheritEventName",
    "displayName": "Event Name Setup Method",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "inherit",
        "displayValue": "Inherit from client"
      },
      {
        "value": "override",
        "displayValue": "Override"
      }
    ],
    "simpleValueType": true,
    "subParams": [
      {
        "type": "RADIO",
        "name": "eventName",
        "displayName": "",
        "radioItems": [
          {
            "value": "standard",
            "displayValue": "Standard",
            "subParams": [
              {
                "type": "SELECT",
                "name": "eventNameStandard",
                "displayName": "Event Name",
                "macrosInSelect": true,
                "selectItems": [
                  {
                    "value": "PAGE_VIEW",
                    "displayValue": "PAGE_VIEW"
                  },
                  {
                    "value": "ADD_CART",
                    "displayValue": "ADD_CART"
                  },
                  {
                    "value": "PURCHASE",
                    "displayValue": "PURCHASE"
                  },
                  {
                    "value": "SIGN_UP",
                    "displayValue": "SIGN_UP"
                  },
                  {
                    "value": "VIEW_CONTENT",
                    "displayValue": "VIEW_CONTENT"
                  },
                  {
                    "value": "SEARCH",
                    "displayValue": "SEARCH"
                  },
                  {
                    "value": "SAVE",
                    "displayValue": "SAVE"
                  },
                  {
                    "value": "START_CHECKOUT",
                    "displayValue": "START_CHECKOUT"
                  },
                  {
                    "value": "LOGIN",
                    "displayValue": "LOGIN"
                  },
                  {
                    "value": "LIST_VIEW",
                    "displayValue": "LIST_VIEW"
                  },
                  {
                    "value": "SUBSCRIBE",
                    "displayValue": "SUBSCRIBE"
                  },
                  {
                    "value": "ADD_BILLING",
                    "displayValue": "ADD_BILLING"
                  },
                  {
                    "value": "ADD_TO_WISHLIST",
                    "displayValue": "ADD_TO_WISHLIST"
                  },
                  {
                    "value": "ACHIEVEMENT_UNLOCKED",
                    "displayValue": "ACHIEVEMENT_UNLOCKED"
                  },
                  {
                    "value": "START_TRIAL",
                    "displayValue": "START_TRIAL"
                  },
                  {
                    "value": "RATE",
                    "displayValue": "RATE"
                  },
                  {
                    "value": "INVITE",
                    "displayValue": "INVITE"
                  },
                  {
                    "value": "COMPLETE_TUTORIAL",
                    "displayValue": "COMPLETE_TUTORIAL"
                  },
                  {
                    "value": "AD_CLICK",
                    "displayValue": "AD_CLICK"
                  },
                  {
                    "value": "AD_VIEW",
                    "displayValue": "AD_VIEW"
                  },
                  {
                    "value": "SHARE",
                    "displayValue": "SHARE"
                  },
                  {
                    "value": "RESERVE",
                    "displayValue": "RESERVE"
                  },
                  {
                    "value": "LEVEL_COMPLETE",
                    "displayValue": "LEVEL_COMPLETE"
                  },
                  {
                    "value": "CUSTOM_EVENT_1",
                    "displayValue": "CUSTOM_EVENT_1"
                  },
                  {
                    "value": "CUSTOM_EVENT_2",
                    "displayValue": "CUSTOM_EVENT_2"
                  },
                  {
                    "value": "CUSTOM_EVENT_3",
                    "displayValue": "CUSTOM_EVENT_3"
                  },
                  {
                    "value": "CUSTOM_EVENT_4",
                    "displayValue": "CUSTOM_EVENT_4"
                  },
                  {
                    "value": "CUSTOM_EVENT_5",
                    "displayValue": "CUSTOM_EVENT_5"
                  },
                  {
                    "value": "SPENT_CREDITS",
                    "displayValue": "SPENT_CREDITS"
                  },
                  {
                    "value": "APP_INSTALL",
                    "displayValue": "APP_INSTALL"
                  },
                  {
                    "value": "APP_OPEN",
                    "displayValue": "APP_OPEN"
                  }
                ],
                "simpleValueType": true
              }
            ]
          },
          {
            "value": "custom",
            "displayValue": "Custom",
            "subParams": [
              {
                "type": "TEXT",
                "name": "eventNameCustom",
                "displayName": "Event Name",
                "simpleValueType": true
              }
            ]
          }
        ],
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "inheritEventName",
            "paramValue": "override",
            "type": "EQUALS"
          }
        ]
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "actionSource",
    "displayName": "Action Source",
    "selectItems": [
      {
        "value": "WEB",
        "displayValue": "Web"
      },
      {
        "value": "MOBILE_APP",
        "displayValue": "Mobile App"
      },
      {
        "value": "OFFLINE",
        "displayValue": "Offline"
      }
    ],
    "simpleValueType": true,
    "help": "Where the event took place.",
    "macrosInSelect": false,
    "defaultValue": "WEB",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "serverParametersGroup",
    "displayName": "Server Parameters",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "LABEL",
        "name": "serverParametersLabel",
        "displayName": "Optional server parameters that will override the original event data. See \u003ca href\u003d\"https://docs.snap.com/api/marketing-api/Conversions-API/Parameters#server-parameters\" target\u003d\"_blank\"\u003eserver parameters\u003c/a\u003e documentation for more details."
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "serverParameters",
        "displayName": "",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Parameter Name",
            "name": "name",
            "type": "SELECT",
            "selectItems": [
              {
                "value": "event_id",
                "displayValue": "Event ID"
              },
              {
                "value": "event_time",
                "displayValue": "Event Time"
              },
              {
                "value": "event_source_url",
                "displayValue": "Event Source URL"
              },
              {
                "value": "data_processing_options",
                "displayValue": "Data Processing Options"
              },
              {
                "value": "test_event_code",
                "displayValue": "Test Event Code"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Parameter Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "newRowButtonText": "Add Parameter"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "userDataParametersGroup",
    "displayName": "User Data Parameters",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "LABEL",
        "name": "userDataParametersLabel",
        "displayName": "Optional user data parameters that will override the original event data. See \u003ca href\u003d\"https://docs.snap.com/api/marketing-api/Conversions-API/Parameters#user-data-parameters\" target\u003d\"_blank\"\u003euser data parameters\u003c/a\u003e documentation for more details.\u003cbr\u003e The \"hashing required\" parameters will be automatically hashed if they are not hashed already."
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "userDataParameters",
        "displayName": "",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Parameter Name",
            "name": "name",
            "type": "SELECT",
            "selectItems": [
              {
                "value": "em",
                "displayValue": "Email (hashing required)"
              },
              {
                "value": "ph",
                "displayValue": "Phone Number (hashing required)"
              },
              {
                "value": "fn",
                "displayValue": "First Name (hashing required)"
              },
              {
                "value": "ln",
                "displayValue": "Last Name (hashing required)"
              },
              {
                "value": "ge",
                "displayValue": "Gender (hashing required)"
              },
              {
                "value": "ct",
                "displayValue": "City (hashing required)"
              },
              {
                "value": "st",
                "displayValue": "State / Region (hashing required)"
              },
              {
                "value": "zp",
                "displayValue": "Zip / Postal Code (hashing required)"
              },
              {
                "value": "country",
                "displayValue": "Country Code (hashing required)"
              },
              {
                "value": "client_ip_address",
                "displayValue": "Client IP Address (do not hash)"
              },
              {
                "value": "client_user_agent",
                "displayValue": "Client User Agent (do not hash)"
              },
              {
                "value": "external_id",
                "displayValue": "External ID"
              },
              {
                "value": "subscription_id",
                "displayValue": "Subscription ID"
              },
              {
                "value": "lead_id",
                "displayValue": "Lead ID"
              },
              {
                "value": "madid",
                "displayValue": "Mobile Advertiser ID"
              },
              {
                "value": "sc_click_id",
                "displayValue": "Snap Click ID"
              },
              {
                "value": "sc_cookie1",
                "displayValue": "Snap Cookie1"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Parameter Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "newRowButtonText": "Add Parameter"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "customDataParametersGroup",
    "displayName": "Custom Data Parameters",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "LABEL",
        "name": "customDataParametersLabel",
        "displayName": "Optional custom data parameters that will override the original event data. \u003cbr\u003e\nYou can add \u003ca href\u003d\"https://docs.snap.com/api/marketing-api/Conversions-API/Parameters#dynamic-ads-parameters\" target\u003d\"_blank\"\u003edynamic ads parameters\u003c/a\u003e or \u003ca href\u003d\"https://docs.snap.com/api/marketing-api/Conversions-API/Parameters#dynamic-travel-ads-parameters\" target\u003d\"_blank\"\u003edynamic travel ads parameters\u003c/a\u003e or any other additional custom parameters you want to send to Snap Conversions API here."
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "customDataParameters",
        "displayName": "",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Parameter Name",
            "name": "name",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Parameter Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "newRowButtonText": "Add Parameter"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_SERVER___

const getAllEventData = require('getAllEventData');
const getType = require('getType');
const JSON = require('JSON');
const sendHttpRequest = require('sendHttpRequest');
const getTimestampMillis = require('getTimestampMillis');
const setCookie = require('setCookie');
const getCookieValues = require('getCookieValues');
const sha256Sync = require('sha256Sync');
const generateRandom = require('generateRandom');
const getRequestHeader = require('getRequestHeader');
const parseUrl = require('parseUrl');

const eventData = getAllEventData();

if(!data.pixelId || !data.apiAccessToken) {
  return data.gtmOnFailure();
}
const postUrl = getPostUrl();

let postBody = {
  data:[mapEvent(eventData)]
};

sendHttpRequest(postUrl, (statusCode, headers, body) => {
  if (statusCode >= 200 && statusCode < 400) {
    data.gtmOnSuccess();
  } else {
    data.gtmOnFailure();
  }
}, {
  headers: {
    'Content-Type': 'application/json'
  },
  method: 'POST'
}, JSON.stringify(postBody));

function getPostUrl() {
  let postUrl = 'https://tr.snapchat.com/v3/' + data.pixelId + '/events';
  if (data.validate) {
    postUrl = postUrl + '/validate';
  }
  postUrl = postUrl + '?access_token=' + data.apiAccessToken;
  return postUrl;
}

function mapEvent(eventData) {
  let mappedData = {};
  
  mappedData = addServerData(eventData, mappedData);
  mappedData = addUserData(eventData, mappedData);
  mappedData = addCustomData(eventData, mappedData);

  mappedData.integration = "gtmss";

  return mappedData;
}

function addServerData(eventData, mappedData) {
  mappedData.event_name = getEventName(eventData);
  mappedData.event_time = eventData.event_time || getTimestampMillis();
  mappedData.event_source_url = eventData.page_location || eventData.page_referrer || getRequestHeader('referer');
  mappedData.event_id = eventData.event_id;
  mappedData.action_source = data.actionSource;
  mappedData.data_processing_options = eventData.data_processing_options;
  
  if (data.serverParameters) {
    data.serverParameters.forEach(d => {
      if (d.value) {
        mappedData[d.name] = d.value;
      }
    });
  }
  
  return mappedData;
}

function addUserData(eventData, mappedData) {
  mappedData.user_data = {};
  
  mappedData.user_data.client_ip_address = eventData.ip_override;
  mappedData.user_data.client_user_agent = eventData.user_agent;
  
  mappedData.user_data.sc_click_id = getScClickId();
  mappedData.user_data.sc_cookie1 = getScCookie1();
  
  let userData = {};
  if (getType(eventData.user_data) === 'object') {
    userData = eventData.user_data;
  }
  
  let addressData = {};
  const addressType = getType(userData.address);
  if (addressType === 'object' || addressType === 'array') {
    addressData = userData.address[0] || userData.address;
  }
  
  let locationData = {};
  if (eventData.event_location) {
    locationData.country = eventData.event_location.country;
    locationData.city = eventData.event_location.city;
    locationData.region = eventData.event_location.region;
    locationData.postal_code = eventData.event_location.postal_code;
  }
  
  let em = eventData.email || eventData.hashed_email || userData.email || userData.email_address;
  if (em) {
    mappedData.user_data.em = [sha256HashIfNotHashed(em)];
  }
  
  let ph = eventData.phone_number || eventData.hashed_phone_number|| userData.phone_number;
  if (ph) {
    ph = ph.replace("+", "").replace("-", "").replace(" ", "").replace("(", "").replace(")", "");
    mappedData.user_data.ph = [sha256HashIfNotHashed(ph)];
  }
  
  mappedData.user_data.fn = sha256HashIfNotHashed(addressData.first_name);
  mappedData.user_data.ln = sha256HashIfNotHashed(addressData.last_name);
  mappedData.user_data.ge = sha256HashIfNotHashed(addressData.gender);
  mappedData.user_data.ct = sha256HashIfNotHashed(locationData.city || addressData.city);
  mappedData.user_data.st = sha256HashIfNotHashed(locationData.region || addressData.region);
  mappedData.user_data.zp = sha256HashIfNotHashed(locationData.postal_code || addressData.postal_code);
  mappedData.user_data.country = sha256HashIfNotHashed(locationData.country || addressData.country);
  
  mappedData.user_data.external_id = userData.external_id || sha256HashIfNotHashed(eventData.user_id);
  mappedData.user_data.subscription_id = userData.subscription_id;
  
  if (data.userDataParameters) {
    const hashingRequiredParams = ['em', 'ph', 'fn', 'ln', 'ge', 'ct', 'st', 'zp', 'country'];
    data.userDataParameters.forEach(d => {
      if (d.value) {
        let value = d.value;
        if (hashingRequiredParams.indexOf(d.name) > -1) {
          value = sha256HashIfNotHashed(value);
        }
        mappedData.user_data[d.name] = value;
      }
    });
  }
  
  return mappedData;
}

function addCustomData(eventData, mappedData) {
  mappedData.custom_data = {};
  
  mappedData.custom_data.currency = eventData.currency;
  mappedData.custom_data.value = eventData.value || eventData.price;
  mappedData.custom_data.num_items = eventData.num_items;
  mappedData.custom_data.order_id = eventData.transaction_id || eventData.order_id;
  mappedData.custom_data.search_string = eventData.search_term;
  
  if (eventData.items) {
    mappedData.custom_data.content_type = 'product';
    mappedData.custom_data.content_name = eventData.page_title_web || eventData.page_title;
    if (eventData.items[0]) {
      mappedData.custom_data.currency = mappedData.custom_data.currency || eventData.items[0].currency;
      mappedData.custom_data.content_name = mappedData.custom_data.content_name || eventData.items[0].item_name;
    }
    
    mappedData.custom_data.contents = eventData.items.map(item => {
      return {
        "id": item.item_id || item.item_name,
        "quantity": item.quantity,
        "item_price": item.price,
      };
    });
    
    mappedData.custom_data.content_ids = eventData.items.map(item => {return item.item_id;}).join(",");
    mappedData.custom_data.content_category = eventData.items.map(item => {return item.item_category;}).join(",");
    mappedData.custom_data.brands = eventData.items.map(item => {return item.item_brand;}).join(",");
  }
  
  if (data.customDataParameters) {
    data.customDataParameters.forEach(d => {
      if (d.value) {
        mappedData.custom_data[d.name] = d.value;
      }
    });
  }
  
  return mappedData;
}

function getEventName(eventData) {
  if (data.inheritEventName === 'inherit') {
    let eventName = eventData.event_name;
    let gaToSnapEventName = {
      'page_view': 'PAGE_VIEW',
      'gtm.dom': 'PAGE_VIEW',
      'add_to_cart': 'ADD_CART',
      'sign_up': 'SIGN_UP',
      'purchase': 'PURCHASE',
      'view_item': 'VIEW_CONTENT',
      'add_to_wishlist': 'ADD_TO_WISHLIST',
      'begin_checkout': 'START_CHECKOUT',
      'add_payment_info': 'ADD_BILLING',
      'view_item_list': 'LIST_VIEW',
      'tutorial_complete': 'COMPLETE_TUTORIAL',
      'search': 'SEARCH',
      'generate_lead': 'SIGN_UP',
      'start_trial': 'START_TRIAL',
      'subscribe': 'SUBSCRIBE',
      'gtm4wp.addProductToCartEEC': 'ADD_CART',
      'gtm4wp.productClickEEC': 'VIEW_CONTENT',
      'gtm4wp.orderCompletedEEC': 'PURCHASE'
    };  
    return gaToSnapEventName[eventName] || eventName;
  }
  return data.eventName === 'standard' ? data.eventNameStandard : data.eventNameCustom;
}

function getScClickId() {
  let scClickId = null;
  if (eventData.page_location) {
    const url = parseUrl(eventData.page_location.toLowerCase());
    if (url && url.searchParams.sccid) {
      scClickId =  url.searchParams.sccid;
      setScCookie('_scclid', scClickId);
      return scClickId;
    }
  }
  
  if (eventData.page_referrer) {
    const referrer = parseUrl(eventData.page_referrer.toLowerCase());
    if (referrer && referrer.searchParams.sccid) {
      scClickId = referrer.searchParams.sccid;
      setScCookie('_scclid', scClickId);
      return scClickId;
    }
  }
  
  return getCookieValues('_scclid')[0];
}

function getScCookie1() {
  let scCookie1 = getCookieValues('_scid')[0];
  if (scCookie1) {
    return scCookie1;
  }
  
  scCookie1 = createUUID();
  setScCookie('_scid', scCookie1);
  return scCookie1;
}

function createUUID() {
  let len = 36;
  let chars = '0123456789abcdef'.split('');
  let uuid = "";
  
  for (var i = 0; i < len; i++) {
    if (i == 8 || i == 13 || i == 18 || i == 23) {
      uuid += '-';
    } else if (i == 14) {
      uuid += '4';
    } else {
      uuid += chars[generateRandom(0, chars.length-1)];
    }
  }
  return uuid;
}

function setScCookie(name, value) {
  setCookie(name, value, {
    domain: 'auto',
    path: '/',
    samesite: 'Lax',
    secure: true,
    'max-age': 31536000, // 1 year
    httpOnly: false
  });
}

function sha256HashIfNotHashed(input){
  if (input == 'undefined' || input == null) {
    return input;
  }
  const type = getType(input);
  if(type == 'undefined' || type == null) {
    return input;
  }
  if(isAlreadyHashed(input)) {
    return input;
  }
  return sha256Sync(input.trim().toLowerCase(), {outputEncoding: 'hex'});
}

function isAlreadyHashed(input){
  return input && (input.match('^[A-Fa-f0-9]{64}$') != null);
}


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "read_event_data",
        "versionId": "1"
      },
      "param": [
        {
          "key": "eventDataAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_http",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://tr.snapchat.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_request",
        "versionId": "1"
      },
      "param": [
        {
          "key": "headerWhitelist",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "headerName"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "referer"
                  }
                ]
              }
            ]
          }
        },
        {
          "key": "headersAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "requestAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "headerAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "queryParameterAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "_scid"
              },
              {
                "type": 1,
                "string": "_scclid"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_scid"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_scclid"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 5/7/2024, 5:25:26 PM


